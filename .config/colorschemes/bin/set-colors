#!/usr/bin/env bash

set -ex

colorscheme=$1

function replace_colors() {
    replacement=$(awk -v n=${2} 'NR == n {print $0}' $COLORSCHEMES/$colorscheme)
    files=$(ls $COLORSCHEMES/templates)
    #files=("colors-kitty.conf" "colors-x11.Xresources" "colors-rofi.rasi" "colors-bspwm.sh" "colors-zathura" "colors-zsh.sh" "colors-dunst.dunstrc")


    for file in ${files[@]}
    do
        if [[ -e $COLORSCHEMES/overrides/$colorscheme/$file ]]
        then
            cp -p $COLORSCHEMES/overrides/$colorscheme/$file $COLORSCHEMES/current/$file
        else
            cp -p $COLORSCHEMES/templates/$file $COLORSCHEMES/current/$file
            eval "sed -i s/%${1}%/${replacement}/g $COLORSCHEMES/current/$file"
        fi
    done
}

for i in {0..15}
do
    replace_colors "c${i}" $((++i))
done
